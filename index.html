<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>3D printed sound</title>
    <link rel="icon" href="assets/iconorange.png" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/mystyle.css" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-139357913-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-139357913-1");
    </script>
  </head>
  <body>
    <div id="loadingScreen">
      <div class="overlay-box text-align-center">
        <img src="assets/Eclipse-loading.gif" /><br />
        <span class="">Loading...</span>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col">
          <div id="audio2DControls">
            Sound from file: <input id="inputSoundFile" type="file" /><br />
            Record sound from michrophone (allow browser to use a
            michrophone):<br />

            <button id="record">Record</button>
            <button id="stop">Stop</button
            ><b> We do NOT collect any of your recorded sounds.</b><br />
            Smoothing: <input type="number" id="smoothing" value="4" /><br />

            <div>
              <span id="startTimeSpan">00:00</span>
              <span id="endTimeSpan">00:00</span>
            </div>
            <div id="audioCuttingWindow">
              <div id="leftAudioCutter"></div>
              <div id="rightAudioCutter"></div>
              <div id="cutWindow"></div>
              <svg
                id="SVG2DWaveform"
                preserveAspectRatio="none"
                width="2000"
                height="100"
                style="width:100%;height:100px;"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <linearGradient id="Gradient" x1="0" x2="0" y1="0" y2="1">
                  <stop offset="0%" stop-color="white" />
                  <stop offset="95%" stop-color="white" stop-opacity="0.75" />
                  <stop offset="100%" stop-color="white" stop-opacity="0" />
                </linearGradient>
                <mask id="Mask">
                  <path fill="url(#Gradient)" />
                </mask>
                <rect
                  id="progress"
                  mask="url(#Mask)"
                  x="0"
                  y="0"
                  width="0"
                  height="100"
                  fill="rgb(250, 50, 0)"
                />
                <rect
                  id="remaining"
                  mask="url(#Mask)"
                  x="0"
                  y="0"
                  width="0"
                  height="100"
                  fill="rgb(250, 184, 1)"
                />
              </svg>
            </div>
            <div>
              <span id="currentTimeSpan">
                00:00
              </span>
            </div>
            <button style="background-color: green" id="playPauseAudio">
              Play/Pause
            </button>
            <button id="downloadWavButton">
              Download sound(.wav) between cutters
            </button>
            <!-- <button id="cutAudioButton">Cut audio</button>-->
          </div>
        </div>
        <br />
      </div>
      <div class="row">
        <div class="col">
          <canvas height="750" width="1080" id="canvasID"></canvas>
        </div>
        <div class="col col-lg-4">
          <div id="audio3DControls">
            <div class="block">
              <button id="vizualizeCutWindow">
                generate 3d waveform between cutters
              </button>
              <br />
              <br />
              <div class="controls">
                Step: <input type="number" value="1" id="step" step="0.1" />
                <br />

                <div style="width: 90px" id="colorWaveForm">
                  Color of model
                </div>

                Offset: <input id="offset" type="number" value="0" />
                <br />
                Height scale:
                <input id="heightScale" type="number" value="50" />
                <br />
              </div>

              <div id="tabstrip">
                <span value="flat"><b>Flat</b></span>
                <span value="circle"><b>Circular</b></span>

                <div>
                  Depth: <input id="flatDepth" type="number" value="8" />
                  <br />

                  Sides:
                  <br />
                  <input type="radio" name="side" value="one" /> One<br />
                  <input type="radio" name="side" checked value="two" />
                  Two<br />
                </div>
                <div>
                  Segments: <input id="segmets" type="number" value="15" />
                </div>
              </div>

              <div class="controls">
                <input type="checkbox" id="addTextFlat" /> add text

                <br />
                <input type="text" id="textFlat" value="text here" />
                <br />
                <input type="checkbox" id="addFontFromFile" /> font from file:
                <input type="file" id="fontFile" accept=".json" />
                <br />
                Type:
                <div class="controls">
                  <input type="radio" name="textTypeFlat" value="subtract" />
                  Subtract<br />
                  <input
                    type="radio"
                    name="textTypeFlat"
                    checked
                    value="union"
                  />
                  Union<br />
                </div>
                Text depth:
                <input type="number" id="textDepth" value="8" />
                <br />
                Text size:
                <input type="number" id="textSize" value="10" />
                <br />
                Move text:
                <br />
                <div class="controls">
                  <span class="xspan">X</span>:
                  <input id="flatXtext" type="number" value="0" />
                  <br />
                  <span class="yspan">Y</span>:
                  <input id="flatYtext" type="number" value="0" />
                  <br />
                  <span class="zspan"> Z</span>:
                  <input id="flatZtext" type="number" value="0" />
                </div>
              </div>
              <hr class="line" align="left" width="100%" />
              <div class="controls">
                <input type="checkbox" id="addStand" /> add stand/hole
                <br />
                Cylinder radius:
                <input id="cylinderRadius" type="number" value="2" />
                <br />
                Clyinder height:
                <input id="cylinderHeight" type="number" value="5" />
                <br />
                Move stand/hole:
                <br />
                <div class="controls">
                  <span class="xspan">X</span>:
                  <input id="cylinderX" type="number" value="0" />
                  <br />
                  <span class="yspan">Y</span>:
                  <input id="cylinderY" type="number" value="-5" />
                  <br />
                  <span class="zspan"> Z</span>:
                  <input id="cylinderZ" type="number" value="4" />
                </div>

                Type:
                <br />
                <div class="controls">
                  <input
                    type="radio"
                    name="radiosCylinderType"
                    value="subtract"
                  />
                  Subtract<br />
                  <input
                    type="radio"
                    name="radiosCylinderType"
                    checked
                    value="union"
                  />
                  Union
                </div>

                <br />
              </div>
              <button onclick="exportBinary()">download .svg</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="post-wrapper">
      <div class="row post-row">
        <div class="col">
          <img class="img-fluid" src="assets/flat.jpg" />
        </div>
        <div class="col">
          <h4>Parameters explained</h4>

          <ul style="list-style-type:disc;">
            <li>
              <b>Smoothing:</b> number of amplitude points calculated from sound
            </li>
            <li><b>Step:</b> is distance between points along X axis</li>
            <li><b>Color of model:</b>color of 3D vizualized waveform</li>
            <li>
              <b>Offset:</b>additional distance between first point along Y axis
            </li>
            <li>
              Flat:
              <ul>
                <li><b>Depth:</b> distance along Z axis</li>
                <li>
                  <b>Sides:</b> One - side only on Y axis, Two - waveform is
                  mirrored across XZ plane
                </li>
              </ul>
            </li>

            <li>
              Circular:
              <ul>
                <li>
                  <b>Segmets:</b> the number of points that make up the circle
                </li>
              </ul>
            </li>

            <li>
              Text:
              <ul>
                <li>
                  <b>Font from file:</b> accepts .json file that can be
                  generated from .tts file on website:
                  <a href="http://gero3.github.io/facetype.js/">Facetype.js</a>
                </li>
                <li>
                  <b>Type:</b> Subtract - subtract text from 3D waveform, union
                  - add text to 3D waveform
                </li>
                <li><b>Text depth:</b> distance along Z axis</li>
                <li><b>Text size:</b> font size</li>
              </ul>
            </li>

            <li>
              Stand/hole:
              <ul>
                <li><b>Cylinder radius:</b> radius of circle</li>
                <li><b>Clyinder height:</b> height along Y axis</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div class="row post-row">
        <div class="col">
          <img class="img-fluid" src="assets/circle.jpg" />
        </div>
        <div class="col">
          <h4>About</h4>
          <p>
            Project is open source, code is under MIT license, so feel free to
            use it how ever you like.
            <b>
              Website run fully on client, we do NOT collect any of your
              recorded sounds.</b
            >

            <br />
            Are you looking for simple stand base, you can download it here:
            <a href="assets/stand.stl" download>download stand.stl</a>
            <br />
            Future goals: separete canvas renders and UI to separete threads,
            more user friendly text and stand moving, audio cutting for better
            detail...
            <br />
            <br />
            Do you have any suggestion, or you found some weird bug? Send me a
            <a href="mailto:tim.toplak@gmail.com">email</a> or open issue on
            <a href="https://github.com/TimToplak/3DprintedSound">Github</a>.
          </p>
        </div>
      </div>
    </div>

    <footer>
      <div class="text-center ">
        <a href="https://github.com/TimToplak/3DprintedSound">
          <img src="assets/mark-github.svg" /> Source code
        </a>
        <a href="mailto:tim.toplak@gmail.com">
          <img src="assets/mail.svg" /> Contact me
        </a>
      </div>
    </footer>

    <script src="js/lib/three.js"></script>
    <script src="js/lib/OrbitControls.js"></script>
    <script src="js/lib/STLExporter.js"></script>
    <script src="js/lib/TransformControls.js"></script>
    <script src="js/lib/ThreeCSG.js"></script>
    <script src="js/lib/STLLoader.js"></script>
    <script src="https://unpkg.com/vanilla-picker@2"></script>

    <script src="js/main.js"></script>
  </body>
</html>
